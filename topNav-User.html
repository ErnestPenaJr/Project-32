<!-- 
Developer Notes:
- Main navigation component for regular users
- Uses Bootstrap 5.x for responsive navigation
- Implements notification system with badge counter
- Uses Font Awesome for icons
- Contains conditional admin-only menu items (hidden by default)
- Dropdown menu uses Bootstrap's dropdown component
- Logo and branding follow MD Anderson guidelines
- Requires:
  * Bootstrap CSS/JS
  * Font Awesome
  * jQuery for dynamic notifications
  * app.js for user menu functionality
-->
<style>
    .btn-user-topNav {
        border: 1px solid #4F46E5;
        color: #4F46E5;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        text-decoration: none;
    }

    .btn-user-topNav:hover {
        background: #4338CA;
        color: white;
        border-color: white;

    }
</style>
<nav class="navbar navbar-expand-lg bg-light bg-gradient sticky-top shadow">
    <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="#">
            <img src="assets/images/logo.png" alt="MD Anderson Cancer Center" height="45"> <i
                class="fas fa-bug fa-2x mx-3" style="color: red; display: none;" data-bs-toggle="tooltip"
                data-bs-placement="bottom" data-bs-title=""></i><br><span id="ServerType"
                class="text-warning fw-bold"></span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse " id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link fw-bold text-uppercase btn-user-topNav" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link fw-bold text-uppercase btn-user-topNav mx-2" href="history.html">View My
                        Bookings</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link fw-bold text-uppercase btn-user-topNav mx-2 dropdown-toggle" href="#" id="notificationsDropdown" role="button" data-bs-toggle="dropdown">
                        <i class="fas fa-bell"></i> Notifications
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" style="min-width: 350px;">
                        <!-- Dynamic notifications will be populated here -->
                        <li><h6 class="dropdown-header">Recent Notifications</h6></li>
                        <div id="notificationDropdown">
                            <li><span class="dropdown-item-text text-muted">No new notifications</span></li>
                        </div>
                        <li><hr class="dropdown-divider"></li>
                        <li><h6 class="dropdown-header">Manage</h6></li>
                        <li><a class="dropdown-item" href="user-notification-preferences.html">
                            <i class="fas fa-user-cog"></i> My Preferences
                        </a></li>
                    </ul>
                </li>
            </ul>
            <!-- add logout to flat at end of navbar -->
            <ul class="navbar-nav ms-auto">
                <li class="nav-item dropdown d-flex align-items-center justify-content-end">
                    <a class="nav-link fw-bold text-uppercase btn-user-topNav mx-2 dropdown-toggle" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fas fa-user-circle"></i>
                        <span id="welcomeMessage" class="welcome-title mx-2"></span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                        <li><a class="dropdown-item" href="user-notification-preferences.html">
                            <i class="fas fa-bell"></i> Notification Preferences
                        </a></li>
                        <li><a class="dropdown-item" href="dashboard.html">
                            <i class="fas fa-tachometer-alt"></i> Dashboard
                        </a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="admin-notification-control.html" id="adminSettingsLink" style="display: none;">
                            <i class="fas fa-shield-alt"></i> Admin: Notifications
                        </a></li>
                    </ul>
                </li>
                <li class="nav-item d-flex align-items-center justify-content-end">
                    <button class="btn btn-outline-danger logout-btn">Logout</button>
                </li>
                <li id="helpRequest" class="nav-item d-flex align-items-center justify-content-end">
                    <button class="btn btn-outline-warning help-btn"><i
                            class="fas fa-question-circle fa-lg"></i></button>
                </li>
            </ul>
            <!--- Offcanvas --->
            <li id="offcanvasTrigger" class="nav-item d-flex align-items-center justify-content-end mx-2">
                <button class="btn btn-user-topNav" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample"
                    aria-controls="offcanvasExample" aria-expanded="false" aria-label="Toggle offcanvas">
                    <i class="fas fa-info-circle fa-lg"></i>
                </button>
            </li>
        </div>
    </div>
</nav>
<div class="container">
    <div class="row">
        <div class="col-12 d-flex justify-content-center align-items-center">
            <h1 class="mt-2 mb-2 text-light" data-aos="fade-left" data-aos-delay="100">DoCM Office Space Reservation <i
                    class="far fa-calendar-alt"></i></h1>
        </div>
    </div>
</div>

<!-- Help Modal -->
<div id="helpForm" class="modal fade " tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-body ">
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title"><i class="fas fa-user-headset"></i> Seeking IT Assistance?<button
                                type="button" class="btn-close float-end fs-6" data-bs-dismiss="modal"
                                aria-label="Close"></button></h3>
                        <p class="-3" style="font-size:14px"> Our dedicated team is ready to support you. To
                            ensure a
                            swift and accurate response, please complete the form below, including detailed
                            information
                            about your issue. An expert from our team will follow up with you promptly. For
                            urgent
                            matters, don't hesitate to call INFO at 713-794-4636 and ask for immediate
                            escalation. We're
                            committed to being there for you every step of the way! Thank you for reaching out
                            to us."
                        </p>

                        <div id="help_text_block" class="mb-3 ">
                            <form id="helpForm" novalidate>
                                <div class="row g-3">
                                    <div class="col-sm-3">
                                        <div class="form-floating mb-3">
                                            <input type="text" class="form-control" id="help_emplid" name="emplid"
                                                placeholder="Enter your MDA Employee ID" required pattern="\d{6}">
                                            <label for="help_emplid">Employee ID</label>
                                            <div class="invalid-feedback">
                                                Please enter a valid 6-digit Employee ID
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-9">
                                        <div class="form-floating mb-3">
                                            <select class="form-select" id="help_Priority" name="priority" required>
                                                <option selected value="" disabled>Priority Level</option>
                                                <option value="1"><span class="text-danger">CRITICAL</span>:
                                                    Application is
                                                    broken and User is unable to save data. Error message is
                                                    displayed.
                                                </option>
                                                <option value="2"><span class="text-warning">HIGH</span>:
                                                    Application is
                                                    working and or data is saved but an error message is
                                                    displayed.
                                                </option>
                                                <option value="3"><span class="text-secondary">MODERATE</span>:
                                                    Application
                                                    is working with no errors; this is purely a cosmetic issue.
                                                </option>
                                                <option value="4"><span class="text-success">LOW</span>:
                                                    Application
                                                    is
                                                    working with no errors; this is a feature request.</option>
                                            </select>
                                            <label for="help_Priority">Please Select</label>
                                            <div class="invalid-feedback">
                                                Please select a priority level
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-floating mb-3">
                                    <textarea class="form-control form-control-lg" placeholder="Leave a comment here"
                                        id="helpDescription" name="description" style="height: 100px" required
                                        minlength="10"></textarea>
                                    <label for="helpDescription">Issue description</label>
                                    <div class="invalid-feedback">
                                        Please provide at least 10 characters describing the issue
                                    </div>
                                    <div class="form-text">
                                        <i class="fas fa-info-circle"></i> Include error messages, steps to
                                        reproduce, and expected behavior
                                    </div>
                                </div>
                            </form>
                        </div>

                        <div id="messageSubmitted" class="mb-3" style="display: none;">
                            <div class="row">
                                <div class="col-sm-8 text-center">
                                    <h2 style="font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">HELP
                                        REQUEST
                                        HAS BEEN SENT!</h2>
                                    <span class="text-muted">We will get back to you as soon as possible. <span
                                            id="closeMessage"></span></span>
                                </div>
                                <div class="col-sm-4">
                                    <i class="far fa-thumbs-up fa-7x"></i>
                                </div>
                            </div>
                        </div>
                        <button id="Submit_Help_Request" class="btn btn-primary float-end mt-3"><i
                                class="far fa-paper-plane"></i> Submit Ticket</button>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="node_modules/@curiosityx/bootstrap-session-timeout/index.js"></script>
<script src="assets/js/session-timeout.js"></script>
<script src="assets/js/topNav.js"></script>
<script>
    $('document').ready(function () {


        getServerType();
        var userName = sessionStorage.getItem('NAME');
        if (userName) {
            $('#welcomeMessage').text('Welcome, ' + userName);
        }

    });
    function getServerType() {
        $.ajax({
            url: 'assets/cfc/functions.cfc?method=getServerType',
            type: 'GET',
            dataType: 'json',
            success: function (data) {
                if (data.serverType == 'PROD') {
                    //$('#ServerType').text(data.serverType + ' ');
                } else if (data.serverType == 'STAGE') {
                    $('#ServerType').text(data.serverType + ' ');
                    $('.fa-bug').slideDown(500);
                    $('.fa-bug').attr('data-bs-title', data.serverType);
                } else {
                    $('#ServerType').text(data.serverType + ' ');
                    $('.fa-bug').slideDown(500);
                    $('.fa-bug').attr('data-bs-title', data.serverType);
                }

            }
        });
    }

</script>